chrome.runtime.onMessage.addListener((request,sender,sendResponse)=>{if(request.action==='scrapeListings'){const listings=Array.from(document.querySelectorAll('[data-testid="marketplace_feed_item"]')).slice(0,request.leads).map(el=>({title:el.textContent.split('\n')[0],price:el.querySelector('[data-testid="marketplace_feed_item_price"]')?.textContent||'N/A',city:'Auto-detected'}));chrome.runtime.sendMessage({action:'leadsScraped',listings:listings});sendResponse({success:true})}});
